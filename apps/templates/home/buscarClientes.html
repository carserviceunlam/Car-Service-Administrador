{% extends "layouts/base.html" %}

{% block title %} Buscar {% endblock %}

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- Font Awesome -->
<link rel="stylesheet" href="{{ ASSETS_ROOT }}/plugins/fontawesome-free/css/all.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="{{ ASSETS_ROOT }}/css/adminlte.min.css">

{% endblock stylesheets %}

{% block content %}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Buscar Clientes</h1>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <div class="card card-primary card-outline">
        <div class="mx-3 sm:py-10 lg:py-25">

          <br>
          <div class="table-responsive py-2">
            <table id="tabla-personas" class="table table-striped table-bordered" style="width:100%">
              <thead>
                <tr>
                  <th>#</th>
                  <th>DNI CUIT</th>
                  <th>Name</th>
                  <th>Apellido</th>
                  <th>Telefono</th>
                  <th>Celular</th>
                  <th>Email</th>
                  <th>Ciudad</th>
                  <th>Provincia</th>
                  <th>Opciones</th>
                </tr>
              </thead>
              <tbody>
                {%for p in persona %}
                <tr>
                  <td>{{p.id}}</td>
                  <td>{{p.dni}}</td>
                  <td>{{p.name}}</td>
                  <td>{{p.last_name}}</td>
                  <td>{{p.phone}}</td>
                  <td>{{p.mobile}}</td>
                  <td>{{p.email}}</td>
                  <td>{{p.city_id.name}}</td>
                  <td>{{p.city_id.province_id.name}}</td>
                  <td> <a class="btn btn-info btn-sm" href="/editarPersona/{{p.id}}">
                      <i class="fas fa-pencil-alt">
                      </i>
                      Edit
                    </a>
                  </td>
                  
                </tr>
                {% endfor %}
              </tbody>

            </table>
          </div>


        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<!-- jQuery -->
<script src="{{ ASSETS_ROOT }}/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="{{ ASSETS_ROOT }}/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="{{ ASSETS_ROOT }}/plugins/chart.js/Chart.min.js"></script>
<!-- ChartJS -->
<script src="{{ ASSETS_ROOT }}/plugins/sweetalert2/sweetalert2.all.min.js"></script>
<!-- AdminLTE App -->
<script src="{{ ASSETS_ROOT }}/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="{{ ASSETS_ROOT }}/js/demo.js"></script>
<!-- page script -->
<!-- DataTables -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap4.min.css">
<script src="{{ ASSETS_ROOT }}/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="{{ ASSETS_ROOT }}/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="{{ ASSETS_ROOT }}/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="{{ ASSETS_ROOT }}/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>

<script>
  $(document).ready(function () {

    var table = $('#tabla-personas').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": true,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
      "oLanguage": {
        "sEmptyTable": "No hay Personas Registradas", //when empty
        "sSearch": "&nbsp;<span> Buscar:</span> _INPUT_", //search
        "sLengthMenu": "&nbsp;<span> Mostrar:</span> _MENU_", //label
        "oPaginate": {
          "sFirst": "Primera",
          "sLast": "Ultima",
          "sNext": ">",
          "sPrevious": "<"
        }, //pagination
        "sInfo": "&nbsp;Mostrando _START_ al _END_ de _TOTAL_ ",
        "sInfoEmpty": "",
        "sLoadingRecords": "Cargando cotizaciones...",
      },
    });

/*     $('#tabla-personas tbody').on('click', 'button', function () {
   
      var data = table.row($(this).parents('tr')).data();
     
      console.log(data)
      Swal.fire({
        icon: 'warning',
        text: 'Desea eliminar a :' + data[2] +' '+data[3] + ' '+' con  dni/cuit: ' + data[1] + '?',
        confirmButtonColor: '#3085d6',
        showCancelButton: true,
        confirmButtonText: 'Continuar',

      }).then((result) => {

        if (result.isConfirmed) {

            href='/eliminarPersona/'+data[0]
            window.location.href =  href
         
        }
      })
    });
 */

  });

</script>

{% endblock javascripts %}